webpackJsonp([5],{474:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.handlers=t.actions=t.saveTableState=t.refreshTable=t.onChoose=t.toggleTools=t.showComplete=t.showLoading=t.showTable=t.REFRESH_TABLE=t.ON_CHOOSE_KEY=t.TOGGLE_TOOLS=t.SHOW_COMPELETE=t.LOADING=t.LOAD_TABLE=void 0;var o,l=a(8),r=n(l),u=a(36),d=n(u),s=t.LOAD_TABLE="LOAD_TABLE",i=t.LOADING="LOADING",c=t.SHOW_COMPELETE="SHOW_COMPELETE",f=t.TOGGLE_TOOLS="TOGGLE_TOOLS",m=t.ON_CHOOSE_KEY="ON_CHOOSE_KEY",h=t.REFRESH_TABLE="REFRESH_TABLE",p="SAVE_STATE",y=t.showTable=function(e){return{type:s,data:e}},g=t.showLoading=function(){return{type:i}},b=t.showComplete=function(e){return{type:c,data:e}},v=t.toggleTools=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{type:f,data:e}},E=t.onChoose=function(e){return{type:m,data:e}},T=t.refreshTable=function(){return{type:h}},_=t.saveTableState=function(e){return{type:p,data:e}},k=(t.actions={showTable:y,showLoading:g,showComplete:b,toggleTools:v,onChoose:E,refreshTable:T,saveTableState:_},t.handlers=(o={},(0,r.default)(o,s,function(e,t){return(0,d.default)({},e,{data:t.data,loading:!1})}),(0,r.default)(o,i,function(e){return(0,d.default)({},e,{loading:!0})}),(0,r.default)(o,c,function(e,t){return(0,d.default)({},e,{keys:t.data})}),(0,r.default)(o,f,function(e,t){return(0,d.default)({},e,{isShowTools:t.data})}),(0,r.default)(o,m,function(e,t){return(0,d.default)({},e,{choose:t.data})}),(0,r.default)(o,h,function(e){return(0,d.default)({},e,{test:!e.test})}),(0,r.default)(o,p,function(e,t){return(0,d.default)({},e,{tableState:t.data})}),o)),O={data:{},loading:!1,keys:[],isShowTools:!1,choose:null,test:!1,tableState:{}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments[1],a=k[t.type];return a?a(e,t):e};t.default=w},1049:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(36),l=n(o),r=a(7),u=n(r),d=a(19),s=n(d),i=a(3),c=n(i),f=a(20),m=n(f),h=a(5),p=n(h),y=a(4),g=n(y),b=a(1),v=n(b),E=a(45),T=n(E),_=a(1050),k=n(_),O=a(30),w=a(51),L="commodity",C="commodity/filters",S="commodity/keys",N=[{title:"编号",dataIndex:"commodityId",sorter:!0},{title:"期数",dataIndex:"roundTime"},{title:"名称",dataIndex:"name"},{title:"属性",dataIndex:"genre",filters:[{text:"虚拟",value:0},{text:"实体",value:1},{text:"实体不可快递",value:2}],render:function(e){switch(e){case 0:return"虚拟";case 1:return"实体";case 2:return"实体不可快递"}}},{title:"分类",dataIndex:"typeName"},{title:"状态",dataIndex:"stateName"},{title:"上架时间",dataIndex:"groundTimeLabel",sorter:!0},{title:"下架时间",dataIndex:"undercarriageTimeLabel",sorter:!0,render:function(e){return null==e||""==e?"暂无记录":e}},{title:"点击量",dataIndex:"viewNum",sorter:!0},{title:"总需",dataIndex:"buyTotalNumber",sorter:!0},{title:"已售",dataIndex:"buyCurrentNumber",sorter:!0},{title:"剩余",dataIndex:"buyNowNumber",sorter:!0}],x=function(e){function t(){return(0,c.default)(this,t),(0,p.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}return(0,g.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){this.loadFilters(),this.loadData()}},{key:"render",value:function(){var e=this,t=this.props.home,a=t.data,n=t.loading,o=t.keys,l=t.choose,r=t.tableState;return v.default.createElement("div",null,v.default.createElement("div",{className:"mine-row"},v.default.createElement(O.Button,{type:"primary"},v.default.createElement(w.Link,{to:"/commodityManagement/add"},"添加模板")),v.default.createElement("span",{className:"ant-divider"}),v.default.createElement(O.Button,{type:"primary"},v.default.createElement(w.Link,{to:"/commodityManagement/templates"},"管理模板")),v.default.createElement("span",{className:"ant-divider"}),v.default.createElement(O.Button,{type:"primary"},v.default.createElement(w.Link,{to:"commodityManagement/cardManagement"},"卡密管理")),v.default.createElement("span",{className:"ant-divider"}),v.default.createElement(O.Button,{type:"primary"},v.default.createElement(w.Link,{to:"commodityManagement/addType"},"添加类型"))),v.default.createElement("div",{className:"mine-row"},v.default.createElement(O.AutoComplete,{dataSource:o,style:{width:200},allowClear:!0,onChange:this.getKeys.bind(this),placeholder:"输入商品名...",size:"large"}),v.default.createElement("span",{className:"ant-divider"}),v.default.createElement(k.default,{keys:l,callback:function(){null==r.page?e.loadData():e.loadData(r,r.page.current)}})),v.default.createElement(O.Table,{columns:N,dataSource:a.list,rowKey:"id",pagination:a,rowSelection:this.selections(),loading:n,bordered:!0,onChange:this.handleTableChange.bind(this)}))}},{key:"selections",value:function(){var e=this.props.onChoose;return{onChange:function(t,a){e(t)}}}},{key:"getKeys",value:function(e){(0,T.default)(S+"?key="+e,this.changeKeys(e).bind(this))}},{key:"changeKeys",value:function(e){var t=this;return function(a){var n=t.props.showComplete,o=t.loadData.bind(t);return o({key:e}),e?void n(a.length>1&&e!=a[0]?[]:a):void n([])}}},{key:"handleTableChange",value:function(e,t,a){var n=0;switch(a.field){case"groundTime":n=1;break;case"undercarriageTime":n=2;break;case"buyTotalNumber":n=3;break;case"buyCurrentNumber":n=4;break;case"buyNowNumber":n=5;break;case"viewNum":n=6;break;default:n=0}var o={order:n,direction:"ascend"==a.order?1:0},r=this.props.saveTableState,d=(0,u.default)({type:t.typeName,state:t.stateName,genre:t.genre},o);r((0,l.default)({},d,{page:e})),this.loadData(d,e.current)}},{key:"loadData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=this.props,n=a.showLoading,o=a.showTable;n(),(0,T.default)(L+"?p="+t,o,{data:e})}},{key:"loadFilters",value:function(){(0,T.default)(C,function(e){N[4].filters=[],N[5].filters=[],e.types.map(function(e,t){N[4].filters.push({text:e.name,value:e.id})}),e.states.map(function(e,t){N[5].filters.push({text:e.name,value:e.id})})})}}]),t}(b.Component);t.default=x},1050:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(19),l=n(o),r=a(3),u=n(r),d=a(20),s=n(d),i=a(5),c=n(i),f=a(4),m=n(f),h=a(1),p=n(h),y=a(30),g=a(45),b=n(g),v="commodity/ground",E="commodity/under",T=function(e){function t(e){return(0,u.default)(this,t),(0,c.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e))}return(0,m.default)(t,e),(0,s.default)(t,[{key:"ground",value:function(){var e=this.props,t=e.keys,a=e.callback;null!=t&&(0,b.default)(v,function(e){e.success?(y.message.success(e.message),a()):y.message.error(e.message)},{data:t})}},{key:"unground",value:function(){var e=this.props,t=e.keys,a=e.callback;null!=t&&(0,b.default)(E,function(e){e.success?(y.message.success(e.message),a()):y.message.error(e.message)},{data:t})}},{key:"render",value:function(){return p.default.createElement("span",null,p.default.createElement(y.Button,{onClick:this.ground.bind(this)},"上架"),p.default.createElement("span",{className:"ant-divider"}),p.default.createElement(y.Button,{onClick:this.unground.bind(this)},"下架"))}}]),t}(h.Component);t.default=T},1051:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(474),l=a(31),r=a(1049),u=n(r),d={showTable:o.showTable,showLoading:o.showLoading,showComplete:o.showComplete,toggleTools:o.toggleTools,onChoose:o.onChoose,refreshTable:o.refreshTable,saveTableState:o.saveTableState},s=function(e){return{home:e.commodity}};t.default=(0,l.connect)(s,d)(u.default)}});