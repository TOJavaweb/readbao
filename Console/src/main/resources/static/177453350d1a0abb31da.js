webpackJsonp([6],{478:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=t.initialState=t.actionHandlers=t.actions=t.saveDeliveryId=t.showDeliveryModal=t.showDetailsModal=t.loadDetails=t.loadFilters=t.showComplete=t.showLoading=t.loadData=t.SAVE_DELI_ID=t.SHOW_DELIVERY_MODAL=t.LOAD_DETAILS=t.SHOW_DETAILS_MODAL=t.LOAD_FILTERS=t.SHOW_COMPLETE=t.SHOW_LOADING=t.LOAD_DATA=void 0;var n,r=a(8),d=l(r),i=a(36),o=l(i),u=t.LOAD_DATA="LOAD_DATA",s=t.SHOW_LOADING="SHOW_LOADING",c=t.SHOW_COMPLETE="SHOW_COMPLETE",f=t.LOAD_FILTERS="LOAD_FILTERS",h=t.SHOW_DETAILS_MODAL="SHOW_DETAILS_MODAL",v=t.LOAD_DETAILS="LOAD_DETAILS",y=t.SHOW_DELIVERY_MODAL="SHOW_DELIVERY_MODAL",m=t.SAVE_DELI_ID="SAVE_DELI_ID",p=t.loadData=function(e){return{type:u,data:e}},D=t.showLoading=function(){return{type:s}},E=t.showComplete=function(e){return{type:c,data:e}},k=t.loadFilters=function(e){return{type:f,data:e}},b=t.loadDetails=function(e){return{type:v,data:e}},I=t.showDetailsModal=function(e){return{type:h,data:e}},_=t.showDeliveryModal=function(e){return{type:y,data:e}},L=t.saveDeliveryId=function(e){return{type:m,data:e}},g=(t.actions={loadData:p,showLoading:D,showComplete:E,loadFilters:k,loadDetails:b,showDetailsModal:I,showDeliveryModal:_,saveDeliveryId:L},t.actionHandlers=(n={},(0,d.default)(n,u,function(e,t){return(0,o.default)({},e,{source:t.data,loading:!1})}),(0,d.default)(n,s,function(e){return(0,o.default)({},e,{loading:!0})}),(0,d.default)(n,c,function(e,t){return(0,o.default)({},e,{keys:t.data})}),(0,d.default)(n,f,function(e,t){return(0,o.default)({},e,{filters:t.data})}),(0,d.default)(n,v,function(e,t){return(0,o.default)({},e,{details:t.data})}),(0,d.default)(n,h,function(e,t){return(0,o.default)({},e,{detailsVisible:t.data})}),(0,d.default)(n,y,function(e,t){return(0,o.default)({},e,{deliveryVisible:t.data})}),(0,d.default)(n,m,function(e,t){return(0,o.default)({},e,{deliveryId:t.data})}),n)),O=t.initialState={source:{},loading:!1,keys:[],filters:[],details:null,detailsVisible:!1,deliveryVisible:!1,deliveryId:null},A=t.reducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments[1],a=g[t.type];return a?a(e,t):e};t.default=A},1062:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(19),r=l(n),d=a(3),i=l(d),o=a(20),u=l(o),s=a(5),c=l(s),f=a(4),h=l(f),v=a(7),y=l(v),m=a(1),p=l(m),D=a(30),E=a(45),k=l(E),b=D.Form.Item,I=D.Table.Column,_="order/all",L="order/keys",g="order/filters",O="order/details",A="order/delivery",w=function(e){var t={labelCol:{span:6},wrapperCol:{span:14}},a=e.datasource;return null==a?p.default.createElement("div",null,"没有数据"):p.default.createElement(D.Form,null,p.default.createElement(b,(0,y.default)({label:"快递公司",key:"deliveryName"},t),p.default.createElement(D.Input,{value:a.deliveryName,disabled:!0})),p.default.createElement(b,(0,y.default)({label:"快递单号",key:"deliveryNumber"},t),p.default.createElement(D.Input,{value:a.deliveryNumber,disabled:!0})),p.default.createElement(b,(0,y.default)({label:"收货人",key:"receiverName"},t),p.default.createElement(D.Input,{value:a.receiverName,disabled:!0})),p.default.createElement(b,(0,y.default)({label:"收货电话",key:"receiverPhone"},t),p.default.createElement(D.Input,{value:a.receiverPhone,disabled:!0})),p.default.createElement(b,(0,y.default)({label:"收货地址",key:"address"},t),p.default.createElement(D.Input,{value:a.address,type:"textarea",disabled:!0})))},M=D.Form.create()(function(e){var t={labelCol:{span:6},wrapperCol:{span:14}},a=e.visible,l=e.onCancel,n=e.onCreate,r=e.form,d=r.getFieldDecorator;return p.default.createElement(D.Modal,{visible:a,title:"输入收货地址",okText:"提交",onCancel:l,onOk:n},p.default.createElement(D.Form,null,p.default.createElement(b,(0,y.default)({label:"快递公司",key:"_deliveryName"},t),d("deliveryName",{rules:[{required:!0,message:"请输入快递公司!"}]})(p.default.createElement(D.Input,null))),p.default.createElement(b,(0,y.default)({label:"快递单号",key:"_deliveryNumber"},t),d("deliveryNumber",{rules:[{required:!0,message:"请输入快递单号!"}]})(p.default.createElement(D.Input,null))),p.default.createElement(b,(0,y.default)({label:"备注",key:"note"},t),d("note")(p.default.createElement(D.Input,null)))))}),C=function(e){function t(e){return(0,i.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.pullData();var e=this.props.loadFilters;(0,k.default)(g,e)}},{key:"handleDetailsOk",value:function(){var e=this.props.showDetailsModal;e(!1)}},{key:"handleDetailsCancel",value:function(){var e=this.props.showDetailsModal;e(!1)}},{key:"pullData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=this.props,l=a.showLoading,n=a.loadData;l(),(0,k.default)(_+"?p="+t,n,{data:e})}},{key:"changeKeys",value:function(e){var t=this;return function(a){var l=t.props.showComplete,n=t.pullData.bind(t);return n({key:e}),e?void l(a.length<1&&e!=a[0]?[]:a):void l([])}}},{key:"handleTableChange",value:function(e,t,a){var l=0;switch(console.log(t),a.field){case"roundTime":l=2;break;case"luckUserAccountId":l=1;break;default:l=0}var n={order:l,direction:"ascend"==a.order?1:0},r=(0,y.default)({corporation:t.corporation},n);this.pullData(r,e.current)}},{key:"getKeys",value:function(e){(0,k.default)(L+"?key="+e,this.changeKeys(e).bind(this))}},{key:"handleDelete",value:function(e){var t=this;console.log(e),(0,k.default)(O+"?id="+e,function(e){return t.pullData()})}},{key:"handleDetails",value:function(e){var t=this.props,a=t.showDetailsModal,l=t.loadDetails;a(!0),(0,k.default)(O+"?id="+e,function(e){l(e)})}},{key:"handleDelivery",value:function(e){var t=this.props,a=t.showDeliveryModal,l=t.saveDeliveryId;l(e),a(!0)}},{key:"handleDeliveryOk",value:function(){var e=this.props.showDeliveryModal;e(!1)}},{key:"handleDeliveryCancel",value:function(){var e=this.props.showDeliveryModal;e(!1)}},{key:"saveFormRef",value:function(e){this.form=e}},{key:"handleCreate",value:function(){var e=this,t=this.form,a=this.props.showDeliveryModal,l=t.getFieldsValue,n=this.props.home.deliveryId;t.validateFields(function(r,d){if(!r){var i=l();i.id=n,(0,k.default)(A,function(t){D.message.success(t.message),e.init()},{data:i}),t.resetFields(),a(!1)}})}},{key:"render",value:function(){var e=this,t=this.props.home,a=t.source,l=t.keys,n=t.filters,r=t.detailsVisible,d=t.details,i=t.deliveryVisible;return p.default.createElement("div",null,p.default.createElement("div",{className:"mine-row"},p.default.createElement(D.AutoComplete,{dataSource:l,style:{width:200},allowClear:!0,onChange:this.getKeys.bind(this),placeholder:"输入商品名...",size:"large"})),p.default.createElement(D.Table,{dataSource:a.list,pagination:a,bordered:!0,onChange:this.handleTableChange.bind(this)},p.default.createElement(I,{title:"开奖时间",dataIndex:"endTime",key:"endTime",render:function(e,t){return t.endTimeLabel}}),p.default.createElement(I,{title:"中奖用户id",dataIndex:"luckUserAccountId",key:"luckUserAccountId"}),p.default.createElement(I,{title:"商品期数",dataIndex:"roundTime",key:"roundTime",sorter:!0}),p.default.createElement(I,{title:"商品名称",dataIndex:"commodityName",key:"commodityName"}),p.default.createElement(I,{title:"兑奖方式",dataIndex:"exchangeWayLabel",key:"exchangeWayLabel",filters:n.exchangeWay}),p.default.createElement(I,{title:"商品属性",dataIndex:"genre",key:"genre",render:function(e,t){return t.genreLabel},filters:n.genre}),p.default.createElement(I,{title:"状态",dataIndex:"exchangeState",key:"exchangeState",render:function(e,t){return t.exchangeStateLabel},filters:n.exchangeState}),p.default.createElement(I,{title:"备注",dataIndex:"cardNotEnough",key:"cardNotEnough",render:function(e,t){var a=t.cardNotEnoughLabel;return null==a?"":p.default.createElement("span",{style:{color:"red"}},a)},filters:n.cardNotEnough}),p.default.createElement(I,{title:"操作",key:"opts",render:function(t,a,l){var n=a.exchangeWay,r=[];return 2==n&&(r.push(p.default.createElement("a",{key:"1",onClick:e.handleDetails.bind(e,a.commodityId)},"详情")),r.push(p.default.createElement("span",{className:"ant-divider",key:"2"}))),1!=n&&2!=n||(r.push(p.default.createElement("a",{key:"3",onClick:e.handleDelivery.bind(e,a.expressId)},"发货")),r.push(p.default.createElement("span",{key:"4",className:"ant-divider"}))),5==n&&(r.push(p.default.createElement("a",{key:"5"},"追踪")),r.push(p.default.createElement("span",{key:"6",className:"ant-divider"}))),r.pop(),r}})),p.default.createElement(D.Modal,{title:"Basic Modal",visible:r,onOk:this.handleDetailsOk.bind(this),onCancel:this.handleDetailsCancel.bind(this)},p.default.createElement(w,{datasource:d})),p.default.createElement(M,{title:"发货",visible:i,ref:this.saveFormRef.bind(this),onCreate:this.handleCreate.bind(this),onOk:this.handleDeliveryOk.bind(this),onCancel:this.handleDeliveryCancel.bind(this)}))}}]),t}(m.Component);t.default=C},1063:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.mapDispatchToProps=t.mapStateToProps=void 0;var n=a(478),r=a(31),d=a(1062),i=l(d),o=t.mapStateToProps=function(e){return{home:e.order}},u=t.mapDispatchToProps={loadData:n.loadData,showLoading:n.showLoading,showComplete:n.showComplete,loadFilters:n.loadFilters,loadDetails:n.loadDetails,showDetailsModal:n.showDetailsModal,showDeliveryModal:n.showDeliveryModal,saveDeliveryId:n.saveDeliveryId};t.default=(0,r.connect)(o,u)(i.default)}});